<!--
%
%       $Id$
%
-->
<head>
        <title>Dred</title>
        <link rel="shortcut icon" href="favicon.png" type="image/png" ></link>
</head>

<body>  
<center>
        <image alt="" src="dnought.png"></image>
        <h1>Dred </h1>
</center>




<p> Dred is an lightweight, customizeable, and extensible Unicode text
editor, written in Java 1.5.  
</p>

<h2>Unix/Linux Usage</h2>
<pre>
        java -jar Dred.jar [--enc=<i>encoding</i>] [--bindings=<i>bindings-url</i>] --wait [filenames] 
</pre> 
or 
<pre>
        java -jar Dred.jar [--enc=<i>encoding</i>] [--bindings=<i>bindings-url</i>] -w [filenames] 
</pre>
or        
<pre>
        ted [--enc=<i>encoding</i>] [--bindings=<i>bindings-url</i>] [filenames]
</pre>  
<p> This starts edit sessions for each of the given filenames.  The
program exits when the last session terminates.  
</p>

<pre>
        java -jar Dred.jar [--enc=<i>encoding</i>] [--bindings=<i>bindings-url</i>] [filenames]  &amp;
</pre>  
or        
<pre>
        dred [--enc=<i>encoding</i>] [--bindings=<i>bindings-url</i>] [filenames]
</pre>  
<p>
This starts edit sessions for each of the given filenames, using an
existing Dred server if one is running, then exits immediately. If no
server is running then it starts itself in server mode, puts up an
(iconified) server control, and starts edit sessions for the
filenames. 
</p>

<p>
If  <tt>--bindings=...</tt>
is specified then the editor's bindings are taken from the file
specified by the given URL; otherwise the default bindings
are used. If <tt>--enc=...</tt> is specified, then
the files are assumed to use the specified encoding; otherwise UTF8 is assumed.
</p>
      
<p>
(see also <A href="Bindings.html">Specifying Bindings</A> and <A href="Underhood.html">Under the Hood</A>)
</p>

<br></br>
<b><A href="index.html">Back to Dred Help Index</A></b>                
<br></br>

<h2>Windows Usage</h2>

After installing Dred using the standard installer you'll find a shortcut
to Dred.jar in the installation directory (and perhaps on your Desktop).
This shortcut starts a pseudo-server from which you will be able to
start editing sessions.

<p> You will almost certainly want to edit the <tt>dred.bindings</tt>
file in the installation directory once you have found out a bit more
about bindings.  </p>


<h2>The Dred Editing Session Window</h2>
<p> In each editing session window you will see the main text editing
component at the bottom, with three &quot;minitext&quot;-editing
components in a row above it. The minitexts are labelled
&quot;....&quot; (pronounced &quot;Argument&quot;), &quot;Find&quot;
and &quot;Repl&quot;. 

<p> The <i>Find</i> and <i>Replace</i> minitexts provide arguments for
the actions of the same name.  </p>

<p> The <i>Argument</i> minitext provides arguments for many of the other
editing commands, including those on the <i>File</i> menu which start
new editing sessions, allow the document to be saved in a different file,
and so forth.  </p>

<p>
Many of the editing commands described below 
are bound to keys, and can also be used on the minitexts.
</p>

</p>
<p>Dred shows which of its (mini-)text windows has the keyboard focus
by showing its cursor in red. A text window with a greyed-out cursor
doesn't have the keyboard focus.  Focus usually moves into a text window
as the mouse-cursor moves into it, but occasionally it's necessary to force
the issue by clicking in the desired window.  </p>

<h2>Editing Model</h2>

<p> At any stage, the document in a window (minitext or main) may have
a <i>selection</i> (which is a contiguous region of the document).
It is bounded at one end by the <i>document cursor</i> -- which is shown
as a thin red rectangle -- and at the other end by the <i>mark</i> --
which is shown as a thin green rectangle. When the cursor and mark are
in the same position only the cursor is shown, and the selection (in that
document) is effectively empty.</p>


<p>The document cursor is moved by the arrow keys. It can be placed
anywhere in the document by clicking with the left mouse-button.  The mark
can be placed anywhere in the document by clicking on the right mouse
button. </p>


<p>The selection is always shown on a grey background.</p>

<p> After every editing action the position of the document in the
editor window is adjusted automatically so that <i>the document cursor
is visible.</i> Between editing commands the position of the  document
in the window can be adjusted manually by the scroll bars, and this can
make the document cursor disappear temporarily.  </p>


<p> There is a <i>cut-buffer</i> which holds at most one text. It is
implemented by the system clipboard, and material placed in the cut
buffer is also available in the clipboard. Material placed in
the system clipboard by another application is accessible through the
cut buffer.  </p>

<h2>Editing Actions</h2>
<p> The editing actions described below are a small selection of the
actions provided by the editor. Brief documentation for <i>all</i> the actions,
and indications of their current binding(s) to keys and/or Menu buttons
can be seen by pressing the <b>Help/Show Bindings</b> menu item. 
</p>
(see also <A href="Bindings.html">Further documentation of bindings</A>)


<h3>Cut and Paste</h3>
<p>The <i>Cut</i> action removes the selection from the document and puts
it in the cut-buffer.  The <i>Paste</i> action inserts the content of
the cut-buffer into the document and re-selects it. The <i>Copy</i> action
replaces the cut-buffer with the selection (if there is a selection),
and the <i>SwapSel</i> action exchanges the selection and the cut-buffer (except
that if the selection is null, then the cut-buffer doesn't change).  The
<i>SwapCursorAndMark</i> action does what its name suggests.
</p>

<h3>Search and Replace</h3>
<h4>
Search and Replace Basics
</h4>
<p>
The three minitexts at the top of an editing window are called the <i>....</i>
(or <i>Argument</i>),
the <i>Find</i>, and the <i>Replace</i> texts, respectively.
</p>

<p>
The <i>FindDown</i> action selects the next (<i>FindUp</i> previous) instance of the
<i>Find</i> minitext. 
</p>
The <b>Edit/Literal&nbsp;Find</b> checkbox
controls the interpretation of the pattern as literal or regular expression.

<p> <b>If the current selection is an instance of the Find text </b>
then the <i>ReplaceDown</i> action saves the current selection in the
cut-buffer and replaces it with the <i>Repl</i> minitext -- leaving the
cursor to the right of the mark. The <i>ReplaceUp</i> button does the
same, but leaves the cursor to the left of the mark.  </p>

<p>The <i>FindUp</i> action is usually bound to the SHIFTED key that
the <i>FindDown</i> action is bound to; likewise the <i>ReplaceUp</i>
action is usually bound to the SHIFTED <i>ReplaceDown</i> key.  </p>

<p>The <b>Edit/Literal&nbsp;Replace</b> checkbox controls the
interpretation of the <i>Repl</i> minitext
 as a literal or regexp substitution (<tt>$n</tt> replaces the
<tt>n</tt>th bracketed expression in the pattern).
</p>

<p> The <i>FindSelDown</i> action makes the current selection the
<i>Find</i> text, then acts as the <i>FindDown</i> action. Likewise
<i>FindSelUp</i> makes the current selection the <i>Find</i> text,
then acts as the <i>FindUp</i> action.  </p>

<p>The <i>ClearArgument</i> action moves the keyboard focus
into the <i>Argument</i> minitext area and erases the text that is
there. <i>ClearFind</i>, and <i>ClearRepl</i> behave analogously in the
<i>Find</i> and <i>Repl</i> minitexts. 
</p>

<h4>
Search and Replace in Practice
</h4>
<p>
One way of replacing the next instance of
"FOO" with "BAR" is to type the keystrokes bound to
<pre>
      <i>ClearFind</i> F O O <i>FindSelDown</i> <i>ClearRepl</i> B A R <i>ReplaceDown</i>
</pre>
Replacing the following instance just requires 
<pre>
      <i>FindSelDown</i> <i>ReplaceDown</i>
</pre>
since the <i>Find</i> and <i>Repl</i> minitexts are already 
set to the right pattern and replacement.
</p>

<p>
        The <i>ReplaceAll</i> action replaces (without any interaction) all
        instances of the <i>Find</i> minitext within the current selection
        with the <i>Repl</i> minitext, and selects the resulting transformed
        text. The original selection is preserved in the cut buffer, so
        this action can be undone with <i>SwapSel</i>.        
</p>
<p>
        If you want to "approve" each replacement interactively,
        then just use <i>FindSelDown</i> <i>ReplaceDown</i> in sequence
        repeatedly, undoing any replacement you don't approve of with
        <i>SwapSel</i>. 
</p>

<h3>Treatment of the Selection</h3>
Dred offers two modes of treating the selection. Most users will
decide on one of them and stick to it forever.
<ol>
       <li>
       <b>Typing-cuts-selection:</b> Typing new material automatically
       cuts the selection into the cut buffer. This is the behaviour
       that most people have come to expect of editors. 
       <br></br>
       In this mode Dred distinguish between three types of selection: 
       <ul>
         <li>
           <i>definite selections</i>: which are those made "manually"
           by the user with the mouse or cursor movement actions.
         </li>
         
         <li>
           <i>tentative selections</i>: which are those made automatically
           by Dred when its automatic bracket-matching is enabled. 
           A tentative selection is shown with a slightly
           lighter grey background than definite selections have.
         </li>
         
         <li>
           <i>mixed selections</i>: which arise when a tentative selection is
           extended manually. A mixed selection may be shown with a mix
           of backgrounds, or with the same colour background as
           definite selections have.
         </li>
       </ul>
       <br></br>
       Tentative selections are not cut when new
       characters are typed, whereas  mixed and definite selections are
       automatically cut when characters are typed.
       </li>
              
       <br></br>

       <li>
       <b>Typing-removes-mark:</b> Typing new characters removes the mark,
       and thus deselects the <i>selection</i>, but does not delete the
       selected material. In this mode Dred does not distinguish between
       tentative and definite selections.
       </li>
</ol>

The choice between treatments is made using the <b>File/Preferences/Typing&nbsp;Removes&nbsp;Selection</b>
checkbox. As with all other preferences its value is preserved between 
Dred invocations.

<h3>Undoing and the Cut Ring</h3>
<p>
Dred has no <i>general</i> mechanism for undoing, but all the commands
that insert, remove, or transform text are individually undoable.
</p>

For example: when the selection is non-null


<pre>
        <i>Cut</i>      is undone by <i>Paste</i> 
                
        <i>SwapSel</i>  is undone by <i>SwapSel</i>
</pre>
 
and (whether or not the selection is null)     
<pre>
        <i>Paste</i>    is undone by <i>Cut</i> 
</pre>
<p>
Moreover if the selection is an instance of the Find text then 
</p>

<pre>
        <i>Replace</i>  is undone by <i>SwapSel</i>
</pre>

<p> The <i>Cut Ring</i> records the last few pieces of material
that found their way into the cut buffer (the number is adjustable).
The cut ring can be accessed by opening the <i>Cut Ring Editor</i>:
this is a specialized  editor session that normally shows the content
of the cut ring. This editor session behaves in most respects like an
ordinary editing session so material can be transferred from it to any
other text window using <i>Copy</i> and <i>Paste</i>. (Of course the 
Cut Ring Editor  doesn't itself send material to the cut ring!)  
</p>

<h3>The Position Ring</h3>
As an <i>aide-memoire</i>, whenever a "big" movement action is executed
the position at which it was executed is appended to the <i>cut ring</i>
if it isn't already in the ring. The <i>Prev Position</i> action moves
the cursor to the last position in the ring and rotates the ring by one
step: the <i>Next Position</i> action is its inverse.  For the moment
the size of the ring is fixed at 8.

<h3>Markers</h3>
The characters with Unicodes <tt>fff0</tt> ... <tt>fffa</tt> (the
"specials" range) are treated as markers and are shown (in red) as
<strong style="color: red">❶, ❷, ... ❾, ❿</strong> (<i>i.e.</i> single
glyphs that resemble <strong style="color: red">(1), (2), ... (9), (10)</strong>). 
They are removed from the document as it is saved, but otherwise treated the same
as ordinary characters. They can be used to mark places in the document
to which you may wish to return. Don't forget to bind keystrokes to
them (I use <tt>ctrl 1</tt> ... <tt>crtrl 0</tt>).

<h3>"Small" Changes</h3>
<p>
Any single character insertion can be undone by the <i>Delete</i> action.
</p>

<p>
When there is a nonempty selection in typing-cuts-selection mode,
the <i>Delete</i> action behaves exactly like the <i>Cut</i> action, and
can therefore be undone by the <i>Paste</i> action.
In all other circumstances it removes the character to the left of
the cursor from the document without affecting the cut buffer.
In any case the mark is removed, thereby deselecting the selection.
</p>

<p>
The  <i>Swap2</i> action swaps the two characters immediately to the left
of the cursor without affecting the cut buffer. It undoes itself.
</p>


<h2>Opening and saving files</h2>

<h3>Saving</h3>
When you have finished editing a file, you can save it using the <b>File/Save</b>,
or <b>File/Save&nbsp;As</b> menu entries or the corresponding shortcuts.
Dred saves a backup copy of the file in a file whose path is
made by appending a tilde "<tt>~</tt>" to the path of the original
file. If the "secondary backups" preference is enabled, and the single-tilde
backup file exists, then a double-tilde backup file is written. 

<p>
Dred is quite cautious about saving a file. If it looks like the file has
been written during the period that it has been being edited, then Dred will
warn you and ask you what to do. Likewise, if you <b>"Save&nbsp;As"</b> using the
name of an existing file, Dred will ask whether you really mean it.
</p>

<h4>Character Set Encoding</h4>
A file is usually saved in the character set encoding that it
originated in. It can be saved in a different encoding by
using the <b>File/Save&nbsp;As&nbsp;(Browse)</b> menu entry
and changing the encoding using the encoding selector provided
in the file browser. 

<h3>Opening</h3>
Use the <b>File/Edit&nbsp;....</b> menu entry with the name of
the file in the argument minitext, or use the <b>File/Edit&nbsp;(browse)</b> 
menu entry to start a new editing session. 

<p> The "filename completion" shortcut in the argument minitext causes
the text in that minitext to change to the longest common prefix of
all the files in the <i>current scope</i> that start with the existing value of
the minitext. 
</p>


<ul>
     <li>
     If the minitext is empty, then a browser is opened in the current
     working directory (the directory from which the session was started).
     </li>
     
     <li>
     If the minitext looks like a relative path then the current scope
     is interpreted <i>relative to the parent 
     path of the file being edited</i>.
     </li>
           
     <li>
     If the minitext is an absolute path then the current scope is the parent 
     of that path.
     </li>
     <li>
     If the minitext looks like a URL, then Dred will do its best to read the file
     from that URL (Note that Dred cannot yet <i>save</i> documents to locations 
     specified by a URL).       
     <br></br>
     Protocols known to work (providing no credentials are required
     for the file) are <tt>ftp:</tt> and <tt>http:</tt>
     <br></br>
           Dred has an additional protocol
           that gives it access to resources (such as documentation and pre-designed
           bindings files) that come packaged in its .jar file. To access such a file
           one prefixes its name with <tt>class://org/sufrin.dred.Dred/</tt>. Specific
           examples that might be useful are:
           <code><pre>
              class://org/sufrin.dred.Dred/dred-bs.bindings
              class://org/sufrin.dred.Dred/function.bindings
              class://org/sufrin.dred.Dred/style.bindings
              class://org/sufrin.dred.Dred/symbols.bindings
              class://org/sufrin.dred.Dred/ctrl.bindings
              class://org/sufrin.dred.Dred/Manual.html
              class://org/sufrin.dred.Dred/Bindings.html
              class://org/sufrin.dred.Dred/Underhood.html
              class://org/sufrin.dred.Dred/index.html
           </pre></code>
     </li>
</ul>

<h4>Character Set Encoding</h4>
A file may be loaded using a specified encoding by using the
<b>File/Edit&nbsp;(Browse)</b> menu entry and changing the encoding
using the encoding selector provided in the file browser.

<h4>Fonts</h4>
Dred usually uses the platform standard font known to Java as <tt>MONOSPACED 14</tt>.
But on some platforms this may lack glyphs for some of the Unicodes that you
need to use. So it is possible to set up Dred to use a different font:

<p>
If the Java system property (or the environment variable)
<tt>DREDFONT</tt> is set, then it is interpreted as the specification
(in the standard Java font specification notation) of a standard Java font, unless
it takes one of the forms
<pre>
        truetype:<i>url</i> <i>options</i>
        type1:<i>url</i>    <i>options</i>
</pre>
In that case, the <i>url</i> (default protocol <tt>file:</tt>) is assumed to denote a (truetype or type1) 
font description file. 
</p>
<p>
The <i>options</i> are either empty, or take one of the forms
<pre>
       
        @<i>pointSize</i>
        @<i>pointSize</i>-<i>shapeoptions</i>
</pre>
When no point size is specified, the pointsize is taken to be 14.
</p>
The <i>shapeoptions</i> may include up to one of each of the following:
<pre>
        b               # bold
        i               # italic
</pre>
and up to one of:
<pre>
        m               # <i>the font is deemed to be monospaced (char width is M-width)</i>
        f               # <i>the font is deemed to be monospaced (char width is M-width)</i>
        uXXXX           # <i>the font is deemed to be monospaced (char width is unicode XXXX-width)</i>
</pre>
The shape options are separated by "-".
<br></br>
Examples:
<pre>
        truetype:arialuni.ttf@14-b                                # <i>bold italic arial unicode from a local font file</i>
        truetype:arialuni.ttf@16.3-b-i-m                          # <i>bold italic M-spaced arial unicode from a local font file</i>
        truetype:file:arialuni.ttf@16.3-b-i-u2167                 # <i>bold italic Ⅷ-spaced arial unicode from a local font file</i>
        type1:/usr/X11R6/lib/X11/fonts/Type1/courb.pfa@12-i       # <i>italic courier from an X11 font file</i>
</pre>
<p>
The <b>View/Pseudo&nbsp;Fixed&nbsp;Width</b> menu checkbox switches Dred's
rendering of a proportionally-spaced font to and from a simulation of
that used for a monospaced font, using the width of an uppercase "M"
as the character pitch (unless a different pitch model character was
specified in the shape options). This can be helpful if you want to work
on material containing glyphs that cannot be found in a monospaced font.
</p>

<h2>Reference</h2>
<p>
A good reference for matters Unicode and Linux is: Markus Kuhn's
<a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html"> UTF-8 and Unicode FAQ for Unix/Linux</a>
</p>


<pre>
<b>Bernard Sufrin</b>
<b>$Revision$</b>
<b>$Date$</b>
</pre>
</body>

































